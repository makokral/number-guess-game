<!DOCTYPE html>
<html lang="bg">
<head><meta charset="utf-8"><title>–ü–æ–∑–Ω–∞–π —á–∏—Å–ª–æ—Ç–æ</title></head>
<body>
  <h2>–ò–≥—Ä–∞—á 2: –ü–æ–∑–Ω–∞–π —Ç–∞–π–Ω–æ—Ç–æ —á–∏—Å–ª–æ</h2>
  <input type="text" id="guess" maxlength="4">
  <button onclick="checkGuess()">–ü–æ–∑–Ω–∞–π</button>
  <p id="result"></p>
  <ul id="history"></ul>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <script>
   const firebaseConfig = {
  apiKey: "AIzaSyAK4IKSCqoxBY9l3v2mSzE1sSWJ011IWcs",
  authDomain: "mygame-6d4ae.firebaseapp.com",
  databaseURL: "https://mygame-6d4ae-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "mygame-6d4ae",
  storageBucket: "mygame-6d4ae.firebasestorage.app",
  messagingSenderId: "940495945809",
  appId: "1:940495945809:web:c56273d7a2468d6239f870"
};
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    let attempt = 0, secret = "";

    db.ref("game/secret").on("value", snap => secret = snap.val() || "");

    function checkGuess() {
      const guess = document.getElementById("guess").value;
      if (guess.length !== 4 || isNaN(guess)) {
        alert("–í—ä–≤–µ–¥–∏ –≤–∞–ª–∏–¥–Ω–æ 4-—Ü–∏—Ñ—Ä–µ–Ω–æ —á–∏—Å–ª–æ");
        return;
      }
      if (!secret) {
        document.getElementById("result").innerText = "–ò–≥—Ä–∞—á 1 –æ—â–µ –Ω–µ –µ –≤—ä–≤–µ–ª —á–∏—Å–ª–æ—Ç–æ...";
        return;
      }
      attempt++;
      let correct = 0;
      for (let i = 0; i < 4; i++) { if (guess[i] === secret[i]) correct++; }

      const msg = guess === secret
        ? üéâ –ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è! –ü–æ–∑–Ω–∞ —á–∏—Å–ª–æ—Ç–æ –∑–∞ ${attempt} –æ–ø–∏—Ç–∞!
        : –û–ø–∏—Ç ${attempt}: ${guess} ‚Üí –í–µ—Ä–Ω–∏ –ø–æ–∑–∏—Ü–∏–∏: ${correct};

      document.getElementById("result").innerText = msg;
      const li = document.createElement("li"); li.textContent = msg;
      document.getElementById("history").appendChild(li);
    }
  </script>
</body>
</html>